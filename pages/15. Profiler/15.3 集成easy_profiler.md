## 15.3 集成easy_profiler

上一节将介绍了将`easy_profiler`编译为库，现在可以集成到引擎了。

### 1. 初始化监听

首先要理清楚，游戏端是作为`easy_profiler`的Server端，监听`profiler_gui.exe`的连接，所以启动游戏时就要初始化`easy_profiler`，等待连接。

代码如下：

```c++
///file:source/utils/application.cpp line:68

/// 初始化
void Application::Init() {
    EASY_MAIN_THREAD;
    profiler::startListen();// 启动profiler服务器，等待gui连接。
    ......
}
```

引擎中存在多个线程，使用`EASY_MAIN_THREAD`来标记这里是主线程，这个宏展开如下：

```c++
# define EASY_MAIN_THREAD EASY_THREAD("Main")
```

那么其他线程，例如文件加载线程就可以这样标记：`EASY_THREAD("Load")`。


## 4.4 OpenGL Core Profiler

OpenGL有着很重的历史包袱，需要开发可编程管线新特性，还需要兼容之前固定管线。

从OpenGL3.3开始，开始使用Profiler来区分，抛弃了历史API的版本称之为Core Profiler。

都2021年了，没有必要再兼容老旧的API，所以后续我也使用Core Profiler。

另外一个原因是，我有时候在Mac上干活，而Mac上只支持Core Profiler了，So。

### Shader语法变化

切换到OpenGL3.3之后，Shader语法也迎来了以下变化：

1. 从 `#version 110` 升级为 `#version 330`
2. 使用关键字`in` 替代 `attribute`
3. 使用关键字`out` 替代`varying`
4. 片段着色器的输出，可以使用关键字`out`指定自定义变量。

下面是一个升级后的例子。

顶点着色器：
```glsl
#version 330

uniform mat4 u_mvp;

layout(location = 0) in  vec3 a_pos;
layout(location = 1) in  vec4 a_color;

out vec4 v_color;

void main()
{
    gl_Position = u_mvp * vec4(a_pos, 1.0);
    v_color = a_color;
};
```

片段着色器：

```glsl
#version 330
in vec4 v_color;
layout(location = 0) out vec4 o_fragColor;
void main()
{
    o_fragColor = v_color;
}
```
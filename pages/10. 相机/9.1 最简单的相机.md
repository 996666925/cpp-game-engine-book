##9.1 最简单的相机

在上一小节项目里，其实已经实现了相机功能，就是`main.cpp` 中的下面两行代码：
```c++
//file:samples/export_blender/load_mesh_from_blender/source/main.cpp 

glm::mat4 view = glm::lookAt(glm::vec3(0, 0, 10), glm::vec3(0, 0,0), glm::vec3(0, 1, 0));//line:85 //指定相机位置 朝向
glm::mat4 projection=glm::perspective(glm::radians(60.f),ratio,1.f,1000.f);//line:86 指定相机视野范围
```

下面将其进行封装到Camera类，实现最基础的Camera。

    CLion项目文件位于 samples\camera\perspective_camera

###1. 基础Camera

新建Camera类,将上面代码封装。

```c++
//file:source/renderer/camera.h line:19

/// 设置相机位置 朝向
/// \param cameraPosition 相机位置
/// \param cameraFowrad 相机朝前方向
/// \param cameraUp 相机朝上方向
void SetView(const glm::vec3& cameraPosition,const glm::vec3& cameraFowrad,const glm::vec3& cameraUp);

/// 设置相机视野
/// \param fovDegrees   相机视野 可视角度
/// \param aspectRatio  宽高比
/// \param nearClip 近裁剪面
/// \param farClip  远裁剪面
void SetProjection(float fovDegrees,float aspectRatio,float nearClip,float farClip);
```

另外也提供以下接口：
```c++
/// 设置清屏颜色
/// \param r
/// \param g
/// \param b
/// \param a
void set_clear_color(float r,float g,float b,float a){clear_color_=glm::vec4(r,g,b,a);}

/// 设置刷帧清屏内容种类
/// \param clear_flag
void set_clear_flag(unsigned int clear_flag){clear_flag_=clear_flag;}
```

###2. 使用Camera
封装了`Camera`之后，在`main.cpp`中就可以创建`Camera`，然后设置参数，然后从`Camera`拿到相关矩阵进行计算。

修改`main()` 函数如下：

```c++
//file:source/main.cpp

int main(void)
{
    ......
    //line:63
    Camera* camera=new Camera();
    camera->set_clear_color(49.f/255,77.f/255,121.f/255,1.f);
    camera->set_clear_flag(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

    while (!glfwWindowShouldClose(window))
    {
        camera->Clear();

        ......

        camera->SetView(glm::vec3(0, 0, 10), glm::vec3(0, 0,0), glm::vec3(0, 1, 0));//line:79
        camera->SetProjection(60.f,ratio,1.f,1000.f);

        ......
        
        glm::mat4 mvp=camera->projection_mat4()*camera->view_mat4()*model;//line:89 //从 Camera 拿到相关矩阵进行计算

        ......
    }
    ......
}
```

###3. 测试
编译运行，测试是否能正确渲染。
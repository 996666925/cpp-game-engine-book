## 22.2 物理材质

所谓材质，就是一系列属性的集合。

模型材质，是渲染这个模型所需要的一系列属性的集合，例如指定贴图、颜色。

物理材质，就是物体用于物理计算所需要的一系列属性的集合，例如摩擦系数、弹性系数。

### 1. 物理材质属性

既然物理材质是用于物理计算的一系列属性集合，那它包括哪些属性呢？

打开Physx的API文档 physx/documentation/PhysXGuide/Manual/API.html，搜索函数名 `createMaterial`，就能找到创建物理材质指定的三个参数的含义。

![](../../imgs/physx/physx_material/api_creatematerial.jpg)

| 属性  | 含义  |
|---|---|
| staticFriction  |  静摩擦系数，物体相对静止时与地面的摩擦力系数。 |
|dynamicFriction|动摩擦系数，物体相对运动时，与地面的摩擦力系数。|
|restitution|弹性系数|

静摩擦力比动摩擦力大一些。

你使出吃奶的力气推箱子，箱子推动之后，就不用那么大力气了。

箱子动起来的那一个临界点，所需的力气是最大的，就说明箱子与地面摩擦力也是最大的。

箱子动起来之后，不用那么大力气了，就说明箱子与地面摩擦力小了。

数值越大，就代表材质的摩擦力越大，就越难移动。

弹性就很好理解了，皮球从高处掉落，如果忽略各种损失，弹性是1，那么就会弹起来回到原位。

如果弹性是0，那么皮球就像掉落进了泥坑。

### 2. 物理材质属性表现

下面通过2个例子，来分别测试摩擦系数与弹性系数对表现的影响。

### 2.1 摩擦系数

```bash
CLion项目文件位于 samples\physx\physx_material_friction
```

情景测试：给小球一个初始速度1.0，对比观察在摩擦系数为0 以及几乎为1的情况下，小球的移动情况。




材质
file:///F:/Github/PhysX/physx/documentation/PhysXGuide/Manual/RigidBodyDynamics.html?highlight=friction#friction-and-restitution

所有的物理对象都至少有一种材料，它定义了摩擦和恢复属性用于解决与对象的碰撞。

要创建材质，请调用 PxPhysics::createMaterial()：

```c++
PxMaterial *  mMaterial ; 

mMaterial  =  mPhysics -> createMaterial ( 0.5f ,  0.5f ,  0.1f );  // 静止的摩擦, 动态摩擦, 恢复原状
if ( ! mMaterial ) 
    fatalError ( "createMaterial failed!" );
```

材质归 PxPhysics 对象所有，可以在多个场景中的对象之间共享。碰撞中涉及的两个物体的材料属性可以以多种方式组合。有关详细信息，请参阅 PxMaterial 的参考文档。

摩擦使用库仑摩擦模型，该模型基于 2 个系数的概念：静摩擦系数和动摩擦系数（有时称为动摩擦）。

摩擦力抵抗接触的两个固体表面的相对横向运动。

这两个系数定义了每个表面施加在另一个表面上的法向力与施加以抵抗横向运动的摩擦力大小之间的关系。

静摩擦定义了在不横向移动的表面之间施加的摩擦量。动态摩擦定义了相对于彼此移动的表面之间施加的摩擦量。

使用默认补丁时摩擦默认情况下，PhysX 的摩擦模型比解析模型更强。

为了获得更接近分析模型的结果，PhysX 4.0 引入了 PxMaterialFlag::eIMPROVED_PATCH_FRICTION 标志。默认情况下，此标志未启用以维护旧行为。

两个碰撞物体的恢复系数是一个分数，它表示沿冲击线取的冲击前后速度之比。恢复系数为 1 的碰撞称为弹性碰撞，而恢复系数 < 1 的碰撞称为非弹性碰撞。


弹性碰撞
https://www.bilibili.com/video/BV1sg411c7wm?spm_id_from=333.337.search-card.all.click